var e0 = new Employee;
e0.name = "e0";
var e1 = new Employee;
e1.name = "e1";
var e2 = new Employee;
e2.name = "e2";
var e3 = new Employee;
e3.name = "e3";
var e4 = new Employee;
e4.name = "e4";

e0.manages.add(e1);
e1.manages.add(e4);
e2.partner = e4;
e3.partner = e1;
RemoveRefToObject(e0);
delete e0;

operation RemoveRefToObject(targetObject){
	for (child in targetObject.manages){
		RemoveRefToObject(child);
	}
	for (object in M.allContents()){
		if (object.partner == targetObject){
			object.partner = null;
		} 
	}
}

operation isCircular(targetObject, valueObject): Boolean {
	var result = false;	
	for (child in valueObject.manages){
		if (child == targetObject){
			result = true;
			break;
		}else{
			result = isCircular(
			targetObject, child);
		}
	}
	return result;
}

operation containedByModel(targetObject): Boolean {
	var result = false;
	if (M.allContents().selectOne(object | object == targetObject) <> null){
		result = true;
	}
	return result;
}
